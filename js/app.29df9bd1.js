(function(t){function e(e){for(var o,s,r=e[0],c=e[1],l=e[2],v=0,m=[];v<r.length;v++)s=r[v],n[s]&&m.push(n[s][0]),n[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],o=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},n={app:0},a=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/movie-finder/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0fb9":function(t,e,i){},2868:function(t,e,i){"use strict";var o=i("3c9d"),n=i.n(o);n.a},"3c9d":function(t,e,i){},4936:function(t,e,i){},"4c83":function(t,e,i){"use strict";var o=i("4936"),n=i.n(o);n.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var o=i("2b0e"),n=i("7bb1"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},["/movie-finder/login"!==t.$route.path?i("div",{staticClass:"navigation-buttons"},[i("button",{staticClass:"button is-pulled-left",on:{click:t.logout}},[i("i",{staticClass:"fa fa-sign-out"}),i("span",[t._v("Logout")])]),i("div",{staticClass:"is-pulled-right"},[i("a",{staticClass:"button",on:{click:function(e){t.$router.push("/movie-finder/favorites")}}},[i("i",{staticClass:"fa fa-bookmark"}),i("span",[t._v("Favorites: "+t._s(t.favoriteItemsQuantity))])])])]):t._e(),i("div",{staticClass:"container"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-6 column--align-center"},[i("router-view")],1)])])])},s=[],r=i("c93e"),c=i("2f62"),l={name:"App",methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$store.dispatch("removeMovies")}).then(function(){t.$router.push("/movie-finder/login")})},updateState:function(){this.$store.dispatch("getMovies"),this.$store.dispatch("getGenres"),this.$store.dispatch("getFavoriteItems")}},computed:Object(r["a"])({},Object(c["c"])(["favoriteItemsQuantity","token"])),created:function(){var t=localStorage.getItem("token");t&&this.updateState()},watch:{token:function(){this.token&&this.updateState()}}},u=l,v=(i("2868"),i("2877")),m=Object(v["a"])(u,a,s,!1,null,null,null);m.options.__file="App.vue";var f=m.exports,d=i("bc3a"),h=i.n(d),p={token:null,loading:!1},_={SET_TOKEN:function(t,e){t.token=e},LOGIN_PENDING:function(t){t.loading=!0},LOGIN_SUCCESS:function(t){t.loading=!1}},g={login:function(t){var e=t.commit;return e("LOGIN_PENDING"),new Promise(function(t){var i="d8cddbe535b2380383617e2ec77b290c";localStorage.setItem("token",i),e("SET_TOKEN",i),e("LOGIN_SUCCESS"),t()})},logout:function(t){var e=t.commit;return new Promise(function(t){localStorage.removeItem("token"),e("SET_TOKEN",null),t()})}},b={token:function(t){return t.token},loading:function(t){return t.loading}},I={state:p,mutations:_,actions:g,getters:b},C=I,O=(i("7514"),i("8afe")),E={movies:[],genres:[],TOKEN:"d8cddbe535b2380383617e2ec77b290c",page:1,loading:!1},k={LOAD_MOVIES:function(t,e){t.movies=Object(O["a"])(t.movies).concat(Object(O["a"])(e))},REMOVE_MOVIES:function(t,e){t.movies=e},LOAD_GENRES:function(t,e){t.genres=e},LOGIN_PENDING:function(t){t.loading=!0},LOGIN_SUCCESS:function(t){t.loading=!1}},w={getMovies:function(t){var e=t.commit;return e("LOGIN_PENDING"),h.a.get("https://api.themoviedb.org/3/movie/popular?api_key=".concat(E.TOKEN,"&language=en-US&page=").concat(E.page++)).then(function(t){e("LOAD_MOVIES",t.data.results),e("LOGIN_SUCCESS")})},getGenres:function(t){var e=t.commit;h.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(E.TOKEN,"&language=en-US")).then(function(t){e("LOAD_GENRES",t.data.genres)})},removeMovies:function(t){var e=t.commit;return new Promise(function(t){e("REMOVE_MOVIES",[]),t()})}},y={movies:function(t){return t.movies},moviesQuantity:function(t){return t.movies.length},genres:function(t){return t.genres},TOKEN:function(t){return t.TOKEN},movieItemFromId:function(t){return function(e){return t.movies.find(function(t){return t.id===e})}}},S={state:E,mutations:k,actions:w,getters:y},x=S,M=(i("f751"),i("20d6"),i("c18c")),T={favoriteItems:[]},N={ADD_FAVORITE_ITEM:function(t,e){t.favoriteItems.push(e)},REMOVE_FAVORITE_ITEM:function(t,e){t.favoriteItems.splice(e,1)},GET_FAVORITE_ITEMS:function(t,e){t.favoriteItems=e},UPDATE_FAVORITE_ITEMS:function(t,e){t.favoriteItems=e}},j={addFavoriteItem:function(t,e){var i=t.commit,o=T.favoriteItems.findIndex(function(t){return t.id===e.id});-1!==o?(i("REMOVE_FAVORITE_ITEM",o),localStorage.favoriteItems=JSON.stringify(T.favoriteItems)):(Object.assign(e,{favorite:!0}),i("ADD_FAVORITE_ITEM",e),localStorage.favoriteItems=JSON.stringify(T.favoriteItems))},getFavoriteItems:function(t){var e=t.commit;e("GET_FAVORITE_ITEMS",JSON.parse(localStorage.favoriteItems||"[]"))},removeAllFavoriteItems:function(t){var e=t.commit;e("UPDATE_FAVORITE_ITEMS",[]),localStorage.removeItem("favoriteItems")},changeItemPosition:function(t,e){var i=t.commit,o=e.item,n=e.shift,a=T.favoriteItems.indexOf(o),s=M(T.favoriteItems,a,a+n);i("UPDATE_FAVORITE_ITEMS",s),localStorage.favoriteItems=JSON.stringify(s)}},L={favoriteItemsQuantity:function(t){return t.favoriteItems.length},favoriteItems:function(t){return t.favoriteItems},isFavorite:function(t){return function(e){return t.favoriteItems.find(function(t){if(t.id===e&&!0===t.favorite)return t})}},favoriteMovieItem:function(t){return function(t){var e=JSON.parse(localStorage.favoriteItems);return e.find(function(e){if(e.id===t)return e})}}},F={state:T,mutations:N,actions:j,getters:L},$=F;o["a"].use(c["a"]);var A=new c["a"].Store({modules:{login:C,movie:x,favorite:$}}),G=i("8c4f"),P=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},R=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"has-text-centered"},[i("h1",{staticClass:"title"},[t._v("Sorry. Page Not Found :(")]),i("p",[t._v("Use the navigation links above to navigate between the product and\n  cart screens.")])])}],D={name:"NotFound"},V=D,U=(i("4c83"),Object(v["a"])(V,P,R,!1,null,"312e2ba2",null));U.options.__file="NotFound.vue";var K=U.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box has-text-centered",attrs:{id:"login"}},[i("h2",{staticClass:"title"},[t._v("Fullstack Movies")]),i("button",{class:[{"is-loading":t.loading},"button is-primary"],on:{click:t.login}},[i("i",{staticClass:"fa fa-sign-in"}),t._v("\n    Login\n  ")])])},B=[],J={name:"LoginBox",methods:{login:function(){var t=this;this.$store.dispatch("login").then(function(){t.$router.push("/movie-finder/movies")})}},computed:Object(r["a"])({},Object(c["c"])(["loading"]))},q=J,z=(i("7e47"),Object(v["a"])(q,Q,B,!1,null,"37d909e9",null));z.options.__file="LoginBox.vue";var H=z.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box",attrs:{id:"movies"}},[i("div",{staticClass:"movies--header has-text-centered"},[i("i",{staticClass:"fa fa-2x fa-film"}),i("MovieSearch",{attrs:{movies:t.movies}})],1),i("div",{staticClass:"movie-list"},t._l(t.movies,function(t){return i("div",{key:t.id,staticClass:"movie-list--item"},[i("MovieListItem",{attrs:{movie:t}})],1)})),i("div",{staticClass:"movie-count has-text-right"},[i("span",{staticClass:"has-text-weight-bold"},[t._v("# of movies: "+t._s(t.moviesQuantity))])]),i("div",{staticClass:"movie-load"},[i("button",{class:[{"is-loading":t.loading},"button is-primary"],on:{click:t.getMovies}},[t._v("Load more...")])])])},X=[],Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"box",attrs:{id:"movie-list-item"}},[i("span",{staticClass:"bookmark-icon"},[i("i",{class:[t.basicStarClass,t.additionalBookmarkClass],on:{click:t.addItemToFavorites}})]),i("div",{staticClass:"movie-list-item__details"},[i("h1",{staticClass:"title is-4"},[i("router-link",{staticClass:"movie-list-item__link",attrs:{to:"/movie-finder/movies/"+t.movie.id}},[t._v(t._s(t.movie.title))]),t._l(t.movie.genre_ids,function(e,o){return i("p",{key:o,staticClass:"tag movie-list-item__tag"},[t.genres?i("MovieGenre",{attrs:{genre:t.getGenre(e)}}):t._e()],1)}),i("p",[i("span",{class:[t.basicTagClass,t.additionalRatingClass]},[t._v("\n          "+t._s(t.movie.vote_average)+"\n          "),i("i",{staticClass:"fa fa-star"})])])],2),i("p",{staticClass:"movie-list-item__description"},[t._v(t._s(t.movie.overview))]),i("p",{staticClass:"movie-list-item__created_at"},[t._v("\n      Release Date:\n      "),i("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.movie.release_date))])])]),i("div",{staticClass:"movie-list-item__image"},[i("img",{attrs:{src:"https://image.tmdb.org/t/p/w500/"+t.movie.poster_path}})])])},Z=[],tt=(i("7f7f"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[t._v(t._s(t.genre))])}),et=[],it={name:"MovieGenre",props:["genre"]},ot=it,nt=(i("8098"),Object(v["a"])(ot,tt,et,!1,null,"35976eab",null));nt.options.__file="MovieGenre.vue";var at=nt.exports,st={name:"MovieListItem",props:["movie"],data:function(){return{basicStarClass:"fa fa-2x",basicTagClass:"tag movie-rating__tag",activeBookmarkClass:"fa-bookmark",inactiveBookmarkClass:"fa-bookmark-o"}},computed:Object(r["a"])({additionalBookmarkClass:function(){return this.isFavorite?this.activeBookmarkClass:this.inactiveBookmarkClass},additionalRatingClass:function(){switch(!0){case this.movie.vote_average<6:return"is-danger";case this.movie.vote_average<7:return"is-warning";case this.movie.vote_average<8:return"is-info";case this.movie.vote_average<9:return"is-link";case this.movie.vote_average<10:return"is-success"}},isFavorite:function(){return this.$store.getters.isFavorite(this.movie.id)}},Object(c["c"])(["genres","favoriteItem"])),methods:{getGenre:function(t){var e=this.genres.find(function(e){return e.id===t});if(e)return e.name},addItemToFavorites:function(){this.$store.dispatch("addFavoriteItem",this.movie)}},components:{MovieGenre:at}},rt=st,ct=(i("7f25"),Object(v["a"])(rt,Y,Z,!1,null,"17538202",null));ct.options.__file="MovieListItem.vue";var lt=ct.exports,ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.movies?i("div",{staticClass:"field"},[i("div",{class:[{"is-loading":t.isLoading},"control"]},[i("p",{staticClass:"control has-icons-left has-icons-right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"},{name:"validate",rawName:"v-validate",value:{min:1,max:15},expression:"{min:1, max:15}"}],staticClass:"input is-primary",attrs:{type:"text",placeholder:"Serch film by title","data-vv-as":"field",name:"min_field"},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onChange],keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onArrowDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onArrowUp(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnter(e):null}]}}),t._m(0),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"icon is-small is-right"},[i("i",{staticClass:"fa fa-check"})])]),i("span",{staticClass:"autocomplete-error"},[t._v(t._s(t.errors.first("min_field")))]),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen&&0!==t.search.length,expression:"isOpen && search.length !== 0"}],staticClass:"autocomplete-results"},t._l(t.results,function(e,o){return i("li",{key:o,staticClass:"autocomplete-result",class:{"is-active":o===t.arrowCounter}},[i("router-link",{attrs:{to:"/movie-finder/movies/"+e.id}},[t._v(t._s(e.title))])],1)}))])]):t._e()},vt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-small is-left"},[i("i",{staticClass:"fa fa-search"})])}],mt=(i("386d"),{name:"MovieSearch",props:["movies"],data:function(){return{search:"",results:[],isOpen:!1,isLoading:!1,arrowCounter:-1}},methods:{onChange:function(){this.isOpen=!0,this.filterResults()},filterResults:function(){var t=this;this.results=this.movies.filter(function(e){return e.title.toLowerCase().indexOf(t.search.toLowerCase())>-1})},onArrowDown:function(){this.arrowCounter<this.results.length&&(this.arrowCounter=this.arrowCounter+1)},onArrowUp:function(){this.arrowCounter>0&&(this.arrowCounter=this.arrowCounter-1)},onEnter:function(){this.$router.push("/movie-finder/movies/".concat(this.results[this.arrowCounter].id)),this.isOpen=!1,this.arrowCounter=-1},handleClickOutside:function(t){this.$el.contains(t.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}}),ft=mt,dt=(i("7557"),Object(v["a"])(ft,ut,vt,!1,null,"73216262",null));dt.options.__file="MovieSearch.vue";var ht=dt.exports,pt={name:"MovieList",components:{MovieListItem:lt,MovieSearch:ht},computed:Object(r["a"])({},Object(c["c"])(["movies","moviesQuantity","loading"])),methods:Object(r["a"])({},Object(c["b"])(["getMovies"]))},_t=pt,gt=(i("e647"),Object(v["a"])(_t,W,X,!1,null,"261e9c5a",null));gt.options.__file="MoviesList.vue";var bt=gt.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item?i("section",{staticClass:"box",attrs:{id:"movie-item"}},[i("span",{staticClass:"return-icon",on:{click:function(e){t.$router.go(-1)}}},[i("i",{staticClass:"fa fa-2x fa-arrow-left"})]),i("div",{staticClass:"movie-item__details"},[i("h1",{staticClass:"title is-4"},[i("p",[t._v(t._s(t.item.title))])])]),i("div",{staticClass:"movie-item__image"},[i("iframe",{attrs:{width:"auto",height:"315",src:"https://www.youtube.com/embed/"+t.youtubeKey,frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""}})])]):t._e()},Ct=[],Ot={name:"movieItem",props:["id"],computed:Object(r["a"])({movieItem:function(){return this.$store.getters.movieItemFromId(parseInt(this.id))},favoriteMovieItem:function(){return this.$store.getters.favoriteMovieItem(parseInt(this.id))},item:function(){return this.movieItem||this.favoriteMovieItem}},Object(c["c"])(["TOKEN"])),data:function(){return{youtubeKey:null}},methods:{searchSource:function(){var t=this;h.a.get("https://api.themoviedb.org/3/movie/".concat(this.id,"/videos?api_key=").concat(this.TOKEN,"&language=en-US")).then(function(e){t.youtubeKey=e.data.results[0].key}).catch(function(t){return window.console.log(t)})}},created:function(){this.searchSource()}},Et=Ot,kt=(i("a97b"),Object(v["a"])(Et,It,Ct,!1,null,"1493ff69",null));kt.options.__file="MovieItem.vue";var wt=kt.exports,yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"favorite"}},[i("div",{staticClass:"favorite--header has-text-centered"},[i("i",{staticClass:"fa fa-2x fa-arrow-left",on:{click:function(e){t.$router.go(-1)}}}),i("i",{staticClass:"fa fa-2x fa-bookmark"})]),0===t.favoriteItems.length?i("p",{staticClass:"favorite-empty-text has-text-centered"},[t._v("\n    Add some items to the favorite list!\n  ")]):t._e(),i("ul",[t._l(t.favoriteItems,function(t){return i("li",{key:t.id,staticClass:"favorite-item"},[i("FavoriteListItem",{attrs:{item:t}})],1)}),i("div",{staticClass:"favorite-details"},[i("p",[t._v("Total Quantity:\n        "),i("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.favoriteItemsQuantity))])]),i("button",{staticClass:"favorite-remove-all--text",attrs:{disabled:0===t.favoriteItems.length},on:{click:t.removeAllFavoriteItems}},[i("i",{staticClass:"fa fa-trash"}),t._v("Remove all\n      ")])])],2)])},St=[],xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"favorite-item__details"},[i("p",{staticClass:"is-inline"},[i("router-link",{attrs:{to:"/movie-finder/movies/"+t.item.id}},[t._v(t._s(t.item.title))])],1),i("div",[i("span",{staticClass:"favorite-item--price has-text-primary has-text-weight-bold"}),i("span",[i("i",{staticClass:"fa fa-arrow-circle-up favorite-item__modify",on:{click:function(e){t.changeItemPosition({item:t.item,shift:-1})}}}),i("i",{staticClass:"fa fa-arrow-circle-down favorite-item__modify",on:{click:function(e){t.changeItemPosition({item:t.item,shift:1})}}})])])]),i("div",{staticClass:"favorite-item__image"},[i("img",{attrs:{src:"https://image.tmdb.org/t/p/w500/"+t.item.poster_path}})])])},Mt=[],Tt={name:"FavoriteListItem",props:["item"],computed:Object(r["a"])({},Object(c["b"])(["favoriteItemsQuantity"])),methods:{changeItemPosition:function(t){this.$store.dispatch("changeItemPosition",t)}}},Nt=Tt,jt=(i("de29"),Object(v["a"])(Nt,xt,Mt,!1,null,"1ab31944",null));jt.options.__file="FavoriteListItem.vue";var Lt=jt.exports,Ft={name:"FavoriteList",components:{FavoriteListItem:Lt},computed:Object(r["a"])({},Object(c["c"])(["favoriteItems","favoriteItemsQuantity"])),methods:Object(r["a"])({},Object(c["b"])(["removeAllFavoriteItems"]))},$t=Ft,At=(i("8e1e"),Object(v["a"])($t,yt,St,!1,null,"41af9a51",null));At.options.__file="FavoritesList.vue";var Gt=At.exports;o["a"].use(G["a"]);var Pt=new G["a"]({mode:"history",routes:[{path:"/movie-finder/",redirect:"/movie-finder/movies"},{path:"*",component:K},{path:"/movie-finder/movies",component:bt},{path:"/movie-finder/movies/:id",component:wt,props:!0},{path:"/movie-finder/favorites",component:Gt},{path:"/movie-finder/login",component:H,beforeEnter:function(t,e,i){var o=localStorage.getItem("token");o&&i("/movie-finder/movies"),i()}}]});Pt.beforeEach(function(t,e,i){var o=localStorage.getItem("token");o||"/movie-finder/login"===t.path?i():i("/movie-finder/login")});var Rt=Pt;o["a"].use(n["a"]),new o["a"]({store:A,router:Rt,render:function(t){return t(f)}}).$mount("#app")},"5bee":function(t,e,i){},7557:function(t,e,i){"use strict";var o=i("8fb8"),n=i.n(o);n.a},"7e47":function(t,e,i){"use strict";var o=i("5bee"),n=i.n(o);n.a},"7f25":function(t,e,i){"use strict";var o=i("ce5d"),n=i.n(o);n.a},8098:function(t,e,i){"use strict";var o=i("af32"),n=i.n(o);n.a},"8e1e":function(t,e,i){"use strict";var o=i("e1d2"),n=i.n(o);n.a},"8fb8":function(t,e,i){},a97b:function(t,e,i){"use strict";var o=i("b96e"),n=i.n(o);n.a},af32:function(t,e,i){},b96e:function(t,e,i){},ce5d:function(t,e,i){},de29:function(t,e,i){"use strict";var o=i("e065"),n=i.n(o);n.a},e065:function(t,e,i){},e1d2:function(t,e,i){},e647:function(t,e,i){"use strict";var o=i("0fb9"),n=i.n(o);n.a}});
//# sourceMappingURL=app.29df9bd1.js.map